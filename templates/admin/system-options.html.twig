{% extends 'admin.html.twig' %}

{% block title %}Syst√©mov√° nastaven√≠ - Admin{% endblock %}

{% block body %}
<div class="page">
    <div class="page__header">
        {% include 'components/page-header.html.twig' with {
            'title': 'Syst√©mov√° nastaven√≠',
            'breadcrumbs': [
                {'text': 'Administrace', 'url': path('admin_dashboard')},
                {'text': 'Syst√©mov√° nastaven√≠'}
            ]
        } %}
    </div>

    <div class="page__content">
        {# Flash messages #}
        {% for type, messages in app.flashes %}
            {% for message in messages %}
                <div class="alert alert--{{ type == 'error' ? 'error' : 'success' }} mb-4">
                    {{ message }}
                </div>
            {% endfor %}
        {% endfor %}

        {# Jednoduch√Ω HTML formul√°≈ô #}
        <form method="post" class="settings-form">
            {# Obecn√© nastaven√≠ #}
            <div class="card mb-6">
                <div class="card__header">
                    <h3>‚öôÔ∏è Obecn√© nastaven√≠</h3>
                </div>
                <div class="card__content">
                    <div class="form-field">
                        <label for="maintenance_scheduled_downtime">Pl√°novan√° odst√°vka</label>
                        <input type="datetime-local" id="maintenance_scheduled_downtime" name="maintenance_scheduled_downtime" 
                               value="{{ settings.maintenance_scheduled_downtime }}" class="form-control">
                    </div>
                </div>
            </div>

            {# Audit nastaven√≠ #}
            <div class="card mb-6">
                <div class="card__header">
                    <h3>üîí Auditov√°n√≠ a bezpeƒçnost</h3>
                </div>
                <div class="card__content">
                    <div class="form-field">
                        <label for="audit_retention_days">Doba uchov√°v√°n√≠ audit log≈Ø (dny)</label>
                        <input type="number" id="audit_retention_days" name="audit_retention_days" 
                               value="{{ settings.audit_retention_days }}" min="30" max="365" class="form-control">
                    </div>
                    
                    <div class="form-field">
                        <label>
                            <input type="checkbox" name="audit_log_ip_addresses" 
                                   {{ settings.audit_log_ip_addresses ? 'checked' : '' }}>
                            Logovat IP adresy u≈æivatel≈Ø
                        </label>
                    </div>
                </div>
            </div>

            {# INSYZ nastaven√≠ #}
            <div class="card mb-6">
                <div class="card__header">
                    <h3>üîß INSYZ Integrace</h3>
                </div>
                <div class="card__content">
                    <div class="form-field">
                        <label>
                            <input type="checkbox" name="insyz_audit_enabled" 
                                   {{ settings.insyz_audit_enabled ? 'checked' : '' }}>
                            Povolit INSYZ auditov√°n√≠
                        </label>
                    </div>
                    
                    <div class="form-field">
                        <label>
                            <input type="checkbox" name="insyz_audit_log_requests" 
                                   {{ settings.insyz_audit_log_requests ? 'checked' : '' }}>
                            Logovat po≈æadavky do INSYZ
                        </label>
                    </div>
                    
                    <div class="form-field">
                        <label>
                            <input type="checkbox" name="insyz_audit_log_responses" 
                                   {{ settings.insyz_audit_log_responses ? 'checked' : '' }}>
                            Logovat odpovƒõdi z INSYZ
                        </label>
                    </div>
                    
                    <div class="form-field">
                        <label for="insyz_audit_retention_days">INSYZ audit - doba uchov√°v√°n√≠ (dny)</label>
                        <input type="number" id="insyz_audit_retention_days" name="insyz_audit_retention_days" 
                               value="{{ settings.insyz_audit_retention_days }}" min="30" max="365" class="form-control">
                    </div>
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn--primary btn--lg">Ulo≈æit nastaven√≠</button>
                <a href="{{ path('admin_dashboard') }}" class="btn btn--ghost btn--lg">Zpƒõt</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}